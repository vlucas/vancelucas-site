<!DOCTYPE html><html><head><title>PHP array_merge - Preserving Numeric Keys • Vance Lucas</title><link href="/stylesheets/application.css" media="all" rel="stylesheet" type="text/css" /><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script><script src="/javascripts/application.js" type="text/javascript"></script><link href="/images/favicon.ico" rel="shortcut icon" /><link href="http://vancelucas.com/feed.xml" rel="alternate" title="RSS" type="application/rss+xml" /><meta charset="utf-8" /><meta content="Personal website and blog of Vance Lucas from Oklahoma City, OK" name="description" /><meta content="Vance Lucas" name="apple-mobile-web-app-title" /><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="initial-scale=1.0, user-scalable=no" name="viewport" /></head><body class="blog blog_php-array_merge---preserving-numeric-keys blog_php-array_merge---preserving-numeric-keys_index"><header><div class="navbar-wrapper"><nav class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button class="navbar-toggle" data-target="#nav-main-header" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Vance Lucas</a></div><div class="navbar-collapse collapse" id="nav-main-header"><ul class="nav navbar-nav"><li><a href="/blog">Blog</a></li><li><a href="/skills">Skills</a></li><li><a href="/timeline">Timeline</a></li><li><a href="/contact">Contact</a></li></ul></div></div></nav></div></header><div class="container main"><div class="col-md-10 col-md-offset-1 col-sm-12 col-lg-10"><h1 class="post_title">PHP array_merge - Preserving Numeric Keys<div class="post_date">Jan  6, 2009</div></h1><p>This is just a quick post on PHP&rsquo;s default behavior of re-indexing numeric keys when using PHP&rsquo;s internal 
<a href="http://www.php.net/manual/en/function.array-merge.php">array_merge</a> and 
<a href="http://www.php.net/manual/en/function.array-merge-recursive.php">array<em>merge</em>recursive</a> functions, because it&rsquo;s a problem I recently ran into, and was unable to find a quick solution to online.</p>

<p>Basically, the problem is that if you&rsquo;re using numerically-indexed arrays with a set number that you don&rsquo;t want to change (like an ID or some other unique identifier), you can&rsquo;t use array_merge, because it automatically re-indexes all the numeric keys in the array to start with 0 on down in order.  There is no flag or option for the function to NOT do this, but there is another way to achieve the same result using PHP&rsquo;s little-documented overridden plus operator &lsquo;+&rsquo; for appending an array to another array.</p>

<p>So just replace this:$destinationArray = array_merge($array1, $array2);</p>

<p>With this instead:</p>

<p>$destinationArray = $array1 + $array2;</p>

<p>Both $array1 and $array2 MUST be arrays or a fatal error will be thrown, so you may want to do some type checking or casting before that line of code.  The difference is that instead of merging the arrays together, the second array will simply be appended to the first one with no changes.</p>

<p>Note that the plus operator for arrays &lsquo;+&rsquo; is only one-dimensional, and is only suitable for simple arrays. If you need a multi-dimensional or complex solution, 
<a href="http://keithdevens.com/weblog/archive/2003/Mar/30/MergeTwoArrays">Keith Devens has a custom merge function</a> that might work for you.</p>
<div class="post_tags"><a class="tag" href="/blog/tags/general/">general</a><a class="tag" href="/blog/tags/php/">php</a></div></div></div><footer id="page_foot"><div class="container"><section class="col-md-4"><h3></h3><img width="250" class="thumbnail" src="/images/VanceLucas-March09.jpg" /><ul class="contact_icons"><li><a href="https://github.com/vlucas"><img src="/images/icons/Github.png" /></a></li><li><a href="https://twitter.com/vlucas"><img src="/images/icons/Twitter.png" /></a></li><li><a href="http://www.linkedin.com/in/vancelucas"><img src="/images/icons/LinkedIN.png" /></a></li><li><a href="/feed.xml"><img src="/images/icons/RSS.png" /></a></li></ul></section><section class="col-md-4"><h3>Sites & Projects</h3><div class="list-group"><a class="list-group-item" href="http://brightbit.com">Brightbit - App Development</a><a class="list-group-item" href="http://autoridge.com">Autoridge - Find Auto Parts</a><a class="list-group-item" href="http://invoicemore.com">InvoiceMore - Online Invoicing</a><a class="list-group-item" href="http://jscompress.com">Online JavaScript Compressor</a><a class="list-group-item" href="http://strfu.com">Online String Functions</a><a class="list-group-item" href="http://frisbyjs.com">Frisby.js - REST API Testing</a><a class="list-group-item" href="http://bulletphp.com">BulletPHP - REST API Microframework</a></div></section><section class="col-md-4"><h3>Recent Posts</h3><div class="list-group"><a class="list-group-item" href="/blog/future-anticipated-questions/">Future Anticipated Questions</a><a class="list-group-item" href="/blog/pulling-my-apps-from-the-app-store/">Pulling My Apps From The App Store: Lessons Learned</a><a class="list-group-item" href="/blog/funemployed/">Funemployed</a><a class="list-group-item" href="/blog/macbook-pro-retina-3-5mm-trrs-cable-with-audio-input/">MacBook Pro Retina 3.5mm TRRS Cable With Audio Input</a><a class="list-group-item" href="/blog/okcphp-user-group-reboot/">Oklahoma PHP User Group Reboot</a></div></section></div></footer><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-359731-12']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>