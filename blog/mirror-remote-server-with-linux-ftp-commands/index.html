<!DOCTYPE html><html><head><title>Mirror Remote Server With Linux FTP Commands â€¢ Vance Lucas</title><link href="../../stylesheets/application.css?1388872757" media="all" rel="stylesheet" type="text/css" /><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script><script src="../../javascripts/application.js?1388872756" type="text/javascript"></script><link href="../../images/favicon.ico" rel="shortcut icon" /><meta charset="utf-8" /><meta content="Personal website and blog of Vance Lucas from Oklahoma City, OK" name="description" /><meta content="Vance Lucas" name="apple-mobile-web-app-title" /><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="initial-scale=1.0, user-scalable=no" name="viewport" /></head><body class="blog blog_mirror-remote-server-with-linux-ftp-commands blog_mirror-remote-server-with-linux-ftp-commands_index"><header><div class="navbar-wrapper"><nav class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><a class="navbar-brand" href="/">Vance Lucas</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/blog">Blog</a></li><li><a href="/skills">Skills</a></li><li><a href="/timeline">Timeline</a></li><li><a href="/contact">Contact</a></li></ul></div></div></nav></div></header><div class="container main"><div class="col-md-10 col-md-offset-1 col-sm-12 col-lg-10"><h1>Mirror Remote Server With Linux FTP Commands</h1><p>A client of mine called me last night around 8:00pm a little worried. I had recently setup a hosting account for her on my server, so that she would be able to switch from her current FTP-only solution to a full hosting account with a domain and everything for when she makes a webstie in the future (she only needs the FTP to share files for now).  On the phone, she said:&gt;The guy who hosts my files just called me.  He got in a disagreement with the guy who manages his servers, and told me to back everything up because it might not be there tomorrow</p>

<p>Wow. In a split second, all your data can be gone. 
The forever kind of gone. The problem was - and the reason she called me - was that she had amassed so many files over the years, that it would take days to backup using her internet connection, and she only had hours to get it done.  Okay, relax, I told her - I&rsquo;ve got it taken care of.  I can use linux shell commands to download all the files to my server from yours.  It will be much faster, and the files will go directly to the new server instead of having to be re-uploaded there, saving some very time-consuming steps.</p>

<p>Okay, I thought. I&rsquo;ll just login, make a big tarball of all the files and grab that with my server. But her file hosting account did not allow shell access, and probably didn&rsquo;t have the extra space for an additional tarball of all the files anyway. So I&rsquo;m stuck with the linux ftp commands - or so I thought.  Turns out, the 
mget ftp command does not recursively download folders on most servers. So the best function to use on a remote linux server that you can&rsquo;t run shell commands on is 
wget, because 
wget also supports the FTP protocol. The usage goes like this:</p>

<p>wget -r ftp://user:pass@domain.com</p>

<p>That was going fine, and then the connection was cut-off by the remote server a short way through getting all the files, probably due to some data transfer cap or something. I re-started it, and it cut off again near the same place. So this isn&rsquo;t enough either, and I still don&rsquo;t want to do it manually. Luckily, there is a wget flag to ignore already existing files - &lsquo;-nc&rsquo;. So the whole command to download everything recursively and 
not re-download files you already have is:</p>

<p>wget -nc -r ftp://user:pass@domain.com</p>

<p>Remember to back up often. You never know when you might find yourself in a sudden and unexpected data loss situation, 
<a href="http://blog.wired.com/business/2009/01/magnolia-suffer.html">like Ma.Gnolia did</a> Friday, January 30th. There&rsquo;s a good discussion happening on the 
<a href="http://www.sitepoint.com/blogs/2009/01/31/open-thread-how-to-prevent-data-loss/">SitePoint open thread on data loss</a> that same some good backup ideas and methods, too.</p>
<div class="small">Posted on Feb 18, 2009</div></div></div><footer id="page_foot"><div class="container"><section class="col-md-4"><h3></h3><img width="250" class="thumbnail" src="../../images/VanceLucas-March09.jpg?1388872753" /><ul class="contact_icons"><li><a href="https://github.com/vlucas"><img src="../../images/icons/GitHub.svg?1388872753" /></a></li><li><a href="https://twitter.com/vlucas"><img src="../../images/icons/Twitter.svg?1388872753" /></a></li><li><a href="http://www.linkedin.com/in/vancelucas"><img src="../../images/icons/LinkedIn.svg?1388872753" /></a></li></ul></section><section class="col-md-4"><h3>Sites & Projects</h3><div class="list-group"><a class="list-group-item" href="http://brightbit.com">Brightbit - App Development</a><a class="list-group-item" href="http://autoridge.com">Autoridge - Find Auto Parts</a><a class="list-group-item" href="http://invoicemore.com">InvoiceMore - Online Invoicing</a><a class="list-group-item" href="http://jscompress.com">Online JavaScript Compressor</a><a class="list-group-item" href="http://strfu.com">Online String Functions</a></div></section><section class="col-md-4"><h3>Recent Posts</h3><div class="list-group"><a class="list-group-item" href="/blog/new-year-new-blog/">New Year, New Blog</a><a class="list-group-item" href="/blog/valitron-the-simple-validation-library-that-doesnt-suck/">Valitron: The Simple Validation Library That Doesn't Suck</a><a class="list-group-item" href="/blog/introducing-bullet-the-functional-php-micro-framework/">Introducing Bullet: The Functional PHP Micro-Framework</a><a class="list-group-item" href="/blog/handling-exceptions-in-gearman-tasks-even-background-ones/">Handling Exceptions in Gearman Tasks (Even Background Ones)</a><a class="list-group-item" href="/blog/confoo-2012-montreal/">Confoo 2012 Montreal</a></div></section></div></footer><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-359731-12']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>