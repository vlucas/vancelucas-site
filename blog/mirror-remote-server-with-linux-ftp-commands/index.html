<!DOCTYPE html><html><head><title>Mirror Remote Server With Linux FTP Commands â€¢ Vance Lucas</title><link href="/stylesheets/application.css" media="all" rel="stylesheet" type="text/css" /><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script><script src="/javascripts/application.js" type="text/javascript"></script><link href="/images/favicon.ico" rel="shortcut icon" /><link href="http://vancelucas.com/feed.xml" rel="alternate" title="RSS" type="application/rss+xml" /><meta charset="utf-8" /><meta content="Personal website and blog of Vance Lucas from Oklahoma City, OK" name="description" /><meta content="Vance Lucas" name="apple-mobile-web-app-title" /><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="initial-scale=1.0, user-scalable=no" name="viewport" /></head><body class="blog blog_mirror-remote-server-with-linux-ftp-commands blog_mirror-remote-server-with-linux-ftp-commands_index"><header><div class="navbar-wrapper"><nav class="navbar navbar-inverse navbar-static-top" role="navigation"><div class="container"><div class="navbar-header"><button class="navbar-toggle" data-target="#nav-main-header" data-toggle="collapse" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/">Vance Lucas</a></div><div class="navbar-collapse collapse" id="nav-main-header"><ul class="nav navbar-nav"><li><a href="/blog">Blog</a></li><li><a href="/skills">Skills</a></li><li><a href="/speaking">Speaking</a></li><li><a href="/timeline">Timeline</a></li><li><a href="/contact">Contact</a></li></ul></div></div></nav></div></header><div class="container main"><div class="col-md-10 col-md-offset-1 col-sm-12 col-lg-10"><h1 class="post_title">Mirror Remote Server With Linux FTP Commands<div class="post_date">Feb 18, 2009</div></h1><p>A client of mine called me last night around 8:00pm a little worried. I had recently setup a hosting account for her on my server, so that she would be able to switch from her current FTP-only solution to a full hosting account with a domain and everything for when she makes a webstie in the future (she only needs the FTP to share files for now).  On the phone, she said:&gt;The guy who hosts my files just called me.  He got in a disagreement with the guy who manages his servers, and told me to back everything up because it might not be there tomorrow</p>

<p>Wow. In a split second, all your data can be gone. 
The forever kind of gone. The problem was - and the reason she called me - was that she had amassed so many files over the years, that it would take days to backup using her internet connection, and she only had hours to get it done.  Okay, relax, I told her - I&rsquo;ve got it taken care of.  I can use linux shell commands to download all the files to my server from yours.  It will be much faster, and the files will go directly to the new server instead of having to be re-uploaded there, saving some very time-consuming steps.</p>

<p>Okay, I thought. I&rsquo;ll just login, make a big tarball of all the files and grab that with my server. But her file hosting account did not allow shell access, and probably didn&rsquo;t have the extra space for an additional tarball of all the files anyway. So I&rsquo;m stuck with the linux ftp commands - or so I thought.  Turns out, the 
mget ftp command does not recursively download folders on most servers. So the best function to use on a remote linux server that you can&rsquo;t run shell commands on is 
wget, because 
wget also supports the FTP protocol. The usage goes like this:</p>

<p>wget -r ftp://user:pass@domain.com</p>

<p>That was going fine, and then the connection was cut-off by the remote server a short way through getting all the files, probably due to some data transfer cap or something. I re-started it, and it cut off again near the same place. So this isn&rsquo;t enough either, and I still don&rsquo;t want to do it manually. Luckily, there is a wget flag to ignore already existing files - &lsquo;-nc&rsquo;. So the whole command to download everything recursively and 
not re-download files you already have is:</p>

<p>wget -nc -r ftp://user:pass@domain.com</p>

<p>Remember to back up often. You never know when you might find yourself in a sudden and unexpected data loss situation, 
<a href="http://blog.wired.com/business/2009/01/magnolia-suffer.html">like Ma.Gnolia did</a> Friday, January 30th. There&rsquo;s a good discussion happening on the 
<a href="http://www.sitepoint.com/blogs/2009/01/31/open-thread-how-to-prevent-data-loss/">SitePoint open thread on data loss</a> that same some good backup ideas and methods, too.</p>
<div class="post_tags"><a class="tag" href="/blog/tags/backup/">backup</a><a class="tag" href="/blog/tags/command-line/">command-line</a><a class="tag" href="/blog/tags/data-backup/">data-backup</a><a class="tag" href="/blog/tags/ftp/">ftp</a><a class="tag" href="/blog/tags/general/">general</a><a class="tag" href="/blog/tags/linux/">linux</a></div></div></div><footer id="page_foot"><div class="container"><section class="col-md-4"><h3></h3><img width="250" class="thumbnail" src="/images/VanceLucas-March09.jpg" /><ul class="contact_icons"><li><a href="https://github.com/vlucas"><img src="/images/icons/Github.png" /></a></li><li><a href="https://twitter.com/vlucas"><img src="/images/icons/Twitter.png" /></a></li><li><a href="http://www.linkedin.com/in/vancelucas"><img src="/images/icons/LinkedIN.png" /></a></li><li><a href="/feed.xml"><img src="/images/icons/RSS.png" /></a></li></ul></section><section class="col-md-4"><h3>Sites & Projects</h3><div class="list-group"><a class="list-group-item" href="http://merrylist.com">MerryList - Christmas Wishlist Creator</a><a class="list-group-item" href="http://invoicemore.com">InvoiceMore - Online Invoicing</a><a class="list-group-item" href="http://jscompress.com">Online JavaScript Compressor</a><a class="list-group-item" href="http://strfu.com">Online String Functions</a><a class="list-group-item" href="http://frisbyjs.com">Frisby.js - REST API Testing</a><a class="list-group-item" href="http://bulletphp.com">BulletPHP - REST API Microframework</a></div></section><section class="col-md-4"><h3>Recent Posts</h3><div class="list-group"><a class="list-group-item" href="/blog/working-for-the-man/">Working For The Man</a><a class="list-group-item" href="/blog/a-modern-php-openx-api-client/">A Modern PHP OpenX API Client</a><a class="list-group-item" href="/blog/fixing-homebrew-on-osx-yosemite-10-10/">Fixing Homebrew on OSX 10.10 Yosemite</a><a class="list-group-item" href="/blog/api-competitive-advantage/">An API is a Competitive Advantage</a><a class="list-group-item" href="/blog/hiding-variables-from-php-var_dump/">Hiding Variables From PHP's <code>var_dump()</code></a></div></section></div></footer><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-359731-12']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>